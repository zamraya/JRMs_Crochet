<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cart - JRM's Crochet</title>
  <link rel="icon" type="image/png" href="images/favicon.jpg" sizes="512x512">
  <link rel="stylesheet" href="index.css">
  <link rel="stylesheet" href="cart.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;700&display=swap" rel="stylesheet">
</head>
<body>
<header>
  <div class="nav">
    <div class="social-icons">
      <a href="https://www.facebook.com/profile.php?id=100089601383321" target="_blank"><i class="fab fa-facebook-square"></i></a>
      <a href="https://www.instagram.com/jrms.crochet" target="_blank"><i class="fab fa-instagram"></i></a>
      <a href="mailto:jrmscrochet@gmail.com"><i class="fas fa-envelope"></i></a>
      <a href="https://www.tiktok.com/@jrms.crochet" target="_blank"><i class="fab fa-tiktok"></i></a>
    </div>

    <div class="left-section">
      <div class="logo">
        <img src="images/logo.png" alt="Logo" class="logo-img">
        <strong>JRM's Crochet</strong>
      </div>

      <div class="hamburger" onclick="toggleMenu()">
        <i class="fas fa-bars"></i>
      </div>

      <div class="nav-links">
        <nav>
          <ul>
            <li><a href="index.html#home"><i class="fas fa-home"></i> Home</a></li>
            <li class="dropdown">
              <a href="#" id="categories-btn"><i class="fas fa-th-large"></i> Categories <span class="arrow">▼</span></a>
              <ul class="dropdown-menu" id="dropdown-menu">
                <li><a href="products.html"><i class="fas fa-box-open"></i> All Products</a></li>
                <li><a href="#featured"><i class="fas fa-star"></i> Featured</a></li>
                <li class="nav-dropdown">
                  <a href="#shop-category"><i class="fas fa-th-list"></i> Shop by Category <span class="arrow">▶</span></a>
                  <ul class="nav-dropdown-menu nav-submenu">
                    <li><a href="bouquets.html"><i class="fas fa-spa"></i> Bouquets</a></li>
                    <li><a href="keychains.html"><i class="fas fa-key"></i> Keychains</a></li>
                    <li><a href="amigurumis.html"><i class="fas fa-paw"></i> Amigurumis</a></li>
                    <li><a href="pouches.html"><i class="fas fa-shopping-bag"></i> Pouches</a></li>
                    <li><a href="pottedplants.html"><i class="fas fa-seedling"></i> Potted Plants</a></li>
                    <li><a href="moneybouquets.html"><i class="fas fa-gift"></i> Money Bouquets</a></li>
                    <li><a href="satin.html"><i class="fas fa-ribbon"></i> Satin</a></li>
                    <li><a href="others.html"><i class="fas fa-box-open"></i> Others</a></li>
                  </ul>
                  <li><a href="#guidelines"><i class="fas fa-info-circle"></i> Guidelines</a></li>
                </li>
              </ul>
            </li>
          </ul>
        </nav>
      </div>
    </div>

    <div class="right-section">
      <a href="cart.html" class="cart-icon">
        <i class="fas fa-shopping-cart"></i>
        <span id="cart-count">0</span>
      </a>
      <a href="#" class="user-icon"><i class="fas fa-user"></i></a>
    </div>
  </div>
</header>

<section class="cart-section">
  <div class="shopping-cart">
    <h2>Shopping Cart</h2>
    <p class="item-count">0 Items</p>
    <table>
      <thead>
        <tr>
          <th>Product Details</th>
          <th>Quantity</th>
          <th>Price</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody id="cart-items"></tbody>
    </table>
    <div class="cart-total">
      <strong>Total Cost:</strong> <span>₱0</span>
    </div>
    <a href="products.html" class="continue"><i class="fas fa-arrow-left"></i> Continue Shopping</a>
  </div>
</section>

<footer>
  <p class="copyright">© 2025 JRM's Crochet. All rights reserved.</p>
</footer>

<script>
  // Toggle hamburger menu
  function toggleMenu() {
    document.querySelector(".nav-links").classList.toggle("active");
  }

  document.addEventListener("DOMContentLoaded", () => {
    const categoriesBtn = document.getElementById("categories-btn");
    const dropdownMenu = document.getElementById("dropdown-menu");

    // Dropdown toggle
    if (categoriesBtn && dropdownMenu) {
      categoriesBtn.addEventListener("click", (event) => {
        event.preventDefault();
        dropdownMenu.style.display =
          dropdownMenu.style.display === "block" ? "none" : "block";
      });

      document.addEventListener("click", (event) => {
        if (!categoriesBtn.contains(event.target) && !dropdownMenu.contains(event.target)) {
          dropdownMenu.style.display = "none";
        }
      });
    }

    const tbody = document.getElementById("cart-items");
    const totalSpan = document.querySelector(".cart-total span");
    const itemCount = document.querySelector(".item-count");
    const cartCount = document.getElementById("cart-count");

    // Load cart from localStorage
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    // Remove null/invalid items
    cart = cart.filter(item => item && item.id && item.name && !isNaN(item.price) && item.quantity > 0);
    localStorage.setItem("cart", JSON.stringify(cart));


    // Render cart function
    function renderCart() {
      tbody.innerHTML = "";
      let total = 0;

      cart.forEach(item => {
        const itemTotal = item.price * item.quantity;
        total += itemTotal;

        const row = document.createElement("tr");
        row.innerHTML = `
          <td>
            <div class="product-details">
              <img src="${item.img}" alt="${item.name}">
              <div class="product-info">
                <h4>${item.name}</h4>
                <p>${item.category || "Uncategorized"}</p>
                <span class="remove" data-id="${item.id}">Remove</span>
              </div>
            </div>
          </td>
          <td>
                <div class="quantity-wrapper">
                <div class="quantity-control">
                <button class="decrease" data-id="${item.id}">-</button>
                <span>${item.quantity}</span>
                <button class="increase" data-id="${item.id}">+</button>
            </div>
            </div>
            </td>
          <td>₱${item.price}</td>
          <td>₱${itemTotal}</td>
        `;
        tbody.appendChild(row);
      });

      totalSpan.textContent = `₱${total}`;
      itemCount.textContent = `${cart.length} Item(s)`;
      cartCount.textContent = cart.length;
    }

    renderCart(); // initial render

    // Handle cart actions
    tbody.addEventListener("click", (e) => {
      const id = e.target.dataset.id;
      if (!id) return;

      const index = cart.findIndex(item => item.id === id);
      if (index === -1) return;

      if (e.target.classList.contains("remove")) {
        cart.splice(index, 1);
      } else if (e.target.classList.contains("increase")) {
        cart[index].quantity++;
      } else if (e.target.classList.contains("decrease")) {
        if (cart[index].quantity > 1) cart[index].quantity--;
      }

      localStorage.setItem("cart", JSON.stringify(cart));
      renderCart();
    });
  });
</script>
</body>
</html>
